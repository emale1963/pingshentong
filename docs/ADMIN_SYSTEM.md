# 后台管理系统使用指南

## 概述

后台管理系统是一个功能完整的管理平台，包含5个核心模块：评审配置管理、AI模型管理、修改密码、系统监测和用户管理。

## 默认账号

- **用户名**: admin
- **密码**: 111111
- **重要**: 首次登录后请立即修改密码！

## 功能模块

### 1. 仪表盘 (/admin/dashboard)

展示系统概览信息：
- 总报告数
- 总评审数
- 用户总数
- 活跃用户数
- 模型使用情况统计
- 最近活动记录
- 快捷操作入口

### 2. 评审配置管理 (/admin/review-configs)

管理各专业的评审规则和关键词：

**功能：**
- 查看所有评审配置列表
- 添加新的评审配置
- 编辑现有配置
- 删除配置
- 查看配置详情

**配置内容：**
- 专业代码（如 architecture, structure 等）
- 配置名称
- 评审深度（浅/中/深）
- 每条评审意见字数范围
- 规则模板
- 关键词数量统计

**API接口：**
- GET /api/admin/review-configs - 获取配置列表
- POST /api/admin/review-configs - 创建配置
- GET /api/admin/review-configs/[id] - 获取配置详情
- PUT /api/admin/review-configs/[id] - 更新配置
- DELETE /api/admin/review-configs/[id] - 删除配置

**关键词管理：**
- GET /api/admin/keywords - 获取关键词列表
- POST /api/admin/keywords - 创建关键词
- PUT /api/admin/keywords/[id] - 更新关键词
- DELETE /api/admin/keywords/[id] - 删除关键词

### 3. AI模型管理 (/admin/models)

管理和监控AI模型状态：

**功能：**
- 查看所有AI模型列表
- 实时显示模型在线/离线状态
- 一键测试模型连接
- 查看响应时间
- 查看错误信息

**模型列表：**
- 豆包 Seed (doubao-seed)
- Kimi K2 (kimi-k2)
- DeepSeek R1 (deepseek-r1)

**API接口：**
- GET /api/admin/models - 获取模型状态
- POST /api/admin/models - 测试模型连接

### 4. 用户管理 (/admin/users)

管理系统用户和权限：

**功能：**
- 查看用户列表（支持分页）
- 搜索用户（按用户名、邮箱、姓名）
- 筛选用户状态
- 添加新用户
- 编辑用户信息
- 重置用户密码
- 禁用/启用用户
- 删除用户

**用户信息：**
- 用户名
- 邮箱
- 姓名
- 角色（普通用户/管理员）
- 状态（启用/禁用）
- 最后登录时间

**API接口：**
- GET /api/admin/users - 获取用户列表
- POST /api/admin/users - 创建用户
- PUT /api/admin/users/[id] - 更新用户
- DELETE /api/admin/users/[id] - 删除用户

### 5. 系统监测 (/admin/system)

实时监控系统性能和运行状态：

**功能：**
- CPU使用率监控
- 内存使用率监控
- 磁盘使用率监控
- API响应时间
- 服务状态监控
- 最近系统日志

**监控指标：**
- CPU使用率
- 内存使用率
- 磁盘使用率
- API响应时间
- 数据库服务状态
- 文件存储服务状态
- AI模型服务状态

**API接口：**
- GET /api/admin/system/performance - 获取性能数据
- POST /api/admin/system/performance - 采集性能数据

### 6. 修改密码 (/admin/change-password)

修改管理员登录密码：

**密码要求：**
- 密码长度至少8位
- 必须包含大写字母
- 必须包含小写字母
- 必须包含数字

**API接口：**
- POST /api/admin/change-password - 修改密码

## 登录认证

### API接口

- POST /api/admin/login - 管理员登录
- GET /api/admin/login - 检查登录状态
- POST /api/admin/logout - 管理员登出

### 认证机制

系统使用基于Cookie的会话认证：
- 会话存储在浏览器Cookie中
- 会话有效期：24小时
- 自动检查登录状态
- 未登录自动跳转到登录页

## 数据库表结构

### 核心表

1. **users** - 用户表
2. **review_configs** - 评审配置表
3. **review_keywords** - 关键词表
4. **admin_operations** - 管理员操作日志表
5. **system_logs** - 系统日志表
6. **performance_metrics** - 性能监控表
7. **system_alerts** - 系统告警表
8. **model_usage_stats** - 模型使用统计表

## 操作日志

系统自动记录所有管理员操作：
- 操作时间
- 操作用户
- 操作类型（创建、更新、删除等）
- 操作模块
- 操作详情
- 操作数据
- IP地址
- 操作结果（成功/失败）
- 错误信息（如果有）

## 安全特性

1. **权限控制**
   - 只有管理员可以访问后台
   - 所有API接口都需要管理员权限
   - 会话过期自动登出

2. **密码安全**
   - 使用bcrypt加密存储
   - 密码强度要求
   - 首次登录强制修改密码

3. **操作审计**
   - 记录所有操作日志
   - 不可篡改的日志记录
   - IP地址追踪

4. **数据验证**
   - 前后端数据验证
   - SQL注入防护
   - XSS攻击防护

## 快速开始

1. **登录后台**
   - 访问首页点击"后台管理"
   - 或直接访问 `/admin/login`
   - 使用默认账号登录

2. **修改密码**
   - 首次登录后立即修改密码
   - 进入"修改密码"页面
   - 按要求设置新密码

3. **配置评审规则**
   - 进入"评审配置管理"
   - 添加或编辑各专业配置
   - 配置关键词和评审规则

4. **测试AI模型**
   - 进入"AI模型管理"
   - 查看模型状态
   - 测试模型连接

5. **监控系统**
   - 进入"系统监测"
   - 查看系统性能
   - 查看系统日志

## 技术栈

- **前端**: Next.js 16, React 19, TypeScript 5, Tailwind CSS 4
- **后端**: Next.js API Routes, Node.js
- **数据库**: PostgreSQL
- **认证**: bcrypt密码加密, Cookie会话管理

## 注意事项

1. 首次登录必须修改密码
2. 定期更换密码（建议90天）
3. 不要在公共设备上保存登录状态
4. 及时登出后台管理系统
5. 定期备份重要配置数据
6. 监控系统性能和资源使用

## 故障排查

### 无法登录

1. 检查用户名和密码是否正确
2. 确认账户状态是否为"启用"
3. 清除浏览器Cookie重新尝试
4. 检查网络连接

### API请求失败

1. 检查登录状态是否有效
2. 查看浏览器控制台错误信息
3. 检查网络连接
4. 查看服务器日志

### 数据加载失败

1. 刷新页面重试
2. 检查数据库连接状态
3. 查看系统日志

## 更新日志

### v1.0.0 (2026-01-05)
- ✅ 实现后台管理系统框架
- ✅ 实现管理员登录和认证
- ✅ 实现评审配置管理模块
- ✅ 实现AI模型管理模块
- ✅ 实现用户管理模块
- ✅ 实现系统监测模块
- ✅ 实现修改密码功能
- ✅ 实现操作日志记录
- ✅ 实现数据库表结构
- ✅ 实现前后端API接口

## 联系支持

如有问题或建议，请联系系统管理员。
